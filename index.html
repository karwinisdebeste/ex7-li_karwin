<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
  
  <head>
    <script src="http://code.jquery.com/jquery-latest.min.js"
    type="text/javascript"></script>
    <title>Oefening 4</title>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
  </head>
  <style>
  table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
  }
  th, td {
  padding: 15px;
  }
  #droneId td{
  border: hidden;
  }
  #droneFiles td{
  border: hidden;
  }
  #droneUrl td{
  border: hidden;
  }
  </style>
  <body>
    <h1>Drones List</h1>
    <div id="mainBody"></div>
    <div id="test"></div>
  <script>
    var settings = {
    "async": true,
    "crossDomain": true,
    "url": "https://web-ims.thomasmore.be/datadistribution/API/2.0/drones?format=json",
    "method": "GET",
    "headers": {
    "authorization": "Basic aW1zOno1MTJtVDRKeVgwUExXZw==",
    "cache-control": "no-cache",
    "postman-token": "78dcc48a-1d21-ac74-b854-07ba32de0805"
    }};

    $.ajax(settings).done(function (droneslist) {
      
    for(var i=0;i<droneslist.length;i++){
     // $("#test").append(droneslist[i].id);
      var settings2 = {
      "async": true,
      "crossDomain": true,
      "url": "https://web-ims.thomasmore.be/datadistribution/API/2.0/drones/"+droneslist[i].id+"?format=json",
      "method": "GET",
      "headers": {
      "authorization": "Basic aW1zOno1MTJtVDRKeVgwUExXZw==",
      "cache-control": "no-cache",
      "postman-token": "78dcc48a-1d21-ac74-b854-07ba32de0805"
      }};
       
      $.ajax(settings2).done(function (filelist) {
        for(var i=0;i<appList.length;i++){
           // $("#test").append(droneslist[i].id);
            var settings2 = {
            "async": true,
            "crossDomain": true,
            "url": "https://web-ims.thomasmore.be/datadistribution/API/2.0/drones/"+appList[i].id+"?format=json",
            "method": "GET",
            "headers": {
            "authorization": "Basic aW1zOno1MTJtVDRKeVgwUExXZw==",
            "cache-control": "no-cache",
            "postman-token": "78dcc48a-1d21-ac74-b854-07ba32de0805"
            }};
             
            $.ajax(settings2).done(function (fileArray) {
                //heir
              $("test").append(fileArray[i].id);// hier gaat het helemaal verkeerd

              }).fail(function(){
            alert('3rd layer: A boo boo has occurred - You may not have been entered');
            });//fail end
          }//foreach end 2nd layer
        }).fail(function(){
      alert('2nd layer: A boo boo has occurred - You may not have been entered');
      });//fail 2end
    }
    }).fail(function(){
    alert('A boo boo has occurred - You may not have been entered');
    });
  </script>
  </body>
  
  
</html>